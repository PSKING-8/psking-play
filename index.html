<div id="pskingGame" style="margin-top:40px; background:#01101f; padding:20px; border-radius:15px; max-width:600px; margin-left:auto; margin-right:auto; color:#e6eef6;">
  <h3>PSKING JÃ¡tÃ©k - Karakter mozgatÃ¡s Ã©s autÃ³k</h3>
  <p>Mozgasd a karaktert nyilakkal vagy WASD-vel, lopj tÃ¡rgyakat!</p>
  <div id="gameArea" style="position:relative; width:600px; height:400px; background:#022131; border-radius:12px; overflow:hidden; margin: 0 auto;">
    
    <!-- Karakter -->
    <div id="player" style="position:absolute; bottom:10px; left:275px; width:40px; height:60px; background:#06b6d4; border-radius:10px; display:flex; align-items:center; justify-content:center; font-weight:bold; color:#022;">
      <span id="playerName" style="position:absolute; top:-20px; left:-10px; width:60px; color:#0ff; font-weight:600; font-size:14px;">PSKING_DAVID</span>
      ðŸš¶
    </div>

    <!-- Loot tÃ¡rgyak -->
    <div class="loot" style="position:absolute; top:150px; left:100px; width:30px; height:30px; background:#f59e0b; border-radius:6px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-weight:bold; color:#022;">ðŸ’°</div>
    <div class="loot" style="position:absolute; top:200px; left:400px; width:30px; height:30px; background:#8b5cf6; border-radius:6px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-weight:bold; color:#022;">ðŸ”«</div>

    <!-- AutÃ³k -->
    <div class="car" style="position:absolute; top:50px; left:0px; width:60px; height:30px; background:#ef4444; border-radius:10px;"></div>
    <div class="car" style="position:absolute; top:120px; left:-100px; width:60px; height:30px; background:#3b82f6; border-radius:10px;"></div>
    <div class="car" style="position:absolute; top:250px; left:-200px; width:60px; height:30px; background:#10b981; border-radius:10px;"></div>
  </div>
  <p id="lootCount" style="margin-top:15px; font-size:1.2rem;">Lopott tÃ¡rgyak: 0</p>
</div>

<script>
  (() => {
    const player = document.getElementById('player');
    const gameArea = document.getElementById('gameArea');
    const lootItems = document.querySelectorAll('.loot');
    const lootCountElem = document.getElementById('lootCount');
    let lootCount = 0;

    // Karakter kezdÅ‘ pozÃ­ciÃ³ja
    let playerPos = { x: 275, y: 340 }; // bottom 10px means y=340 in 400px height

    // MozgÃ¡s sebessÃ©ge
    const speed = 15;
    const gameWidth = 600;
    const gameHeight = 400;
    const playerWidth = 40;
    const playerHeight = 60;

    // AutÃ³k elemei Ã©s sebessÃ©ge
    const cars = [...document.querySelectorAll('.car')];
    const carSpeeds = [3, 2.5, 3.5];

    // MozgatÃ¡s billentyÅ±zet alapjÃ¡n
    window.addEventListener('keydown', (e) => {
      switch (e.key) {
        case 'ArrowLeft':
        case 'a':
          playerPos.x = Math.max(0, playerPos.x - speed);
          break;
        case 'ArrowRight':
        case 'd':
          playerPos.x = Math.min(gameWidth - playerWidth, playerPos.x + speed);
          break;
        case 'ArrowUp':
        case 'w':
          playerPos.y = Math.max(0, playerPos.y - speed);
          break;
        case 'ArrowDown':
        case 's':
          playerPos.y = Math.min(gameHeight - playerHeight, playerPos.y + speed);
          break;
      }
      updatePlayerPosition();
      checkLootCollision();
    });

    function updatePlayerPosition() {
      player.style.left = playerPos.x + 'px';
      player.style.top = playerPos.y + 'px';
    }

    // AutÃ³k folyamatos mozgÃ¡sa
    function moveCars() {
      cars.forEach((car, i) => {
        let left = parseFloat(car.style.left);
        left += carSpeeds[i];
        if (left > gameWidth) left = -100;
        car.style.left = left + 'px';
      });
      requestAnimationFrame(moveCars);
    }

    // Loot elemek Ã©szlelÃ©se (ha karakter rajta van, eltÅ±nik, nÃ¶veljÃ¼k a lootCount-ot)
    function checkLootCollision() {
      lootItems.forEach(loot => {
        if (loot.style.display === 'none') return;

        const lootRect = loot.getBoundingClientRect();
        const playerRect = player.getBoundingClientRect();

        if (
          lootRect.left < playerRect.right &&
          lootRect.right > playerRect.left &&
          lootRect.top < playerRect.bottom &&
          lootRect.bottom > playerRect.top
        ) {
          // Loot megszerzÃ©se
          loot.style.display = 'none';
          lootCount++;
          lootCountElem.textContent = `Lopott tÃ¡rgyak: ${lootCount}`;
        }
      });
    }

    updatePlayerPosition();
    moveCars();
  })();
</script>
